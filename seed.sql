with data_json (doc) as (
    values (
        '[
  {
    "title": "Beyond Earth",
    "thumbnail": "./assets/thumbnails/beyond-earth/trending/large.jpg",
    "year": 2019,
    "category": "Movie",
    "rating": "PG",
    "isBookmarked": false,
    "isTrending": true
  },
  {
    "title": "Bottom Gear",
    "thumbnail": "./assets/thumbnails/bottom-gear/trending/large.jpg",
    "year": 2021,
    "category": "Movie",
    "rating": "PG",
    "isBookmarked": false,
    "isTrending": true
  },
  {
    "title": "Undiscovered Cities",
    "thumbnail": "./assets/thumbnails/undiscovered-cities/trending/large.jpg",
    "year": 2019,
    "category": "TV Series",
    "rating": "E",
    "isBookmarked": false,
    "isTrending": true
  },
  {
    "title": "1998",
    "thumbnail": "./assets/thumbnails/1998/trending/large.jpg",
    "year": 2021,
    "category": "Movie",
    "rating": "18+",
    "isBookmarked": false,
    "isTrending": true
  },
  {
    "title": "Dark Side of the Moon",
    "thumbnail": "./assets/thumbnails/dark-side-of-the-moon/trending/large.jpg",
    "year": 2018,
    "category": "TV Series",
    "rating": "PG",
    "isBookmarked": true,
    "isTrending": true
  },
  {
    "title": "The Great Lands",
    "thumbnail": "./assets/thumbnails/the-great-lands/regular/large.jpg",
    "year": 2019,
    "category": "Movie",
    "rating": "E",
    "isBookmarked": false,
    "isTrending": false
  },
  {
    "title": "The Diary",
    "thumbnail": "./assets/thumbnails/the-diary/regular/large.jpg",
    "year": 2019,
    "category": "TV Series",
    "rating": "PG",
    "isBookmarked": false,
    "isTrending": false
  },
  {
    "title": "Earthâ€™s Untouched",
    "thumbnail": "./assets/thumbnails/earths-untouched/regular/large.jpg",
    "year": 2017,
    "category": "Movie",
    "rating": "18+",
    "isBookmarked": true,
    "isTrending": false
  },
  {
    "title": "No Land Beyond",
    "thumbnail": "./assets/thumbnails/no-land-beyond/regular/large.jpg",
    "year": 2019,
    "category": "Movie",
    "rating": "E",
    "isBookmarked": false,
    "isTrending": false
  },
  {
    "title": "During the Hunt",
    "thumbnail": "./assets/thumbnails/during-the-hunt/regular/large.jpg",
    "year": 2016,
    "category": "TV Series",
    "rating": "PG",
    "isBookmarked": false,
    "isTrending": false
  },
  {
    "title": "Autosport the Series",
    "thumbnail": "./assets/thumbnails/autosport-the-series/regular/large.jpg",
    "year": 2016,
    "category": "TV Series",
    "rating": "18+",
    "isBookmarked": false,
    "isTrending": false
  },
  {
    "title": "Same Answer II",
    "thumbnail": "./assets/thumbnails/same-answer-2/regular/large.jpg",
    "year": 2017,
    "category": "Movie",
    "rating": "E",
    "isBookmarked": false,
    "isTrending": false
  },
  {
    "title": "Below Echo",
    "thumbnail": "./assets/thumbnails/below-echo/regular/large.jpg",
    "year": 2016,
    "category": "TV Series",
    "rating": "PG",
    "isBookmarked": false,
    "isTrending": false
  },
  {
    "title": "The Rockies",
    "thumbnail": "./assets/thumbnails/the-rockies/regular/large.jpg",
    "year": 2015,
    "category": "TV Series",
    "rating": "E",
    "isBookmarked": true,
    "isTrending": false
  },
  {
    "title": "Relentless",
    "thumbnail": "./assets/thumbnails/relentless/regular/large.jpg",
    "year": 2017,
    "category": "Movie",
    "rating": "PG",
    "isBookmarked": true,
    "isTrending": false
  },
  {
    "title": "Community of Ours",
    "thumbnail": "./assets/thumbnails/community-of-ours/regular/large.jpg",
    "year": 2018,
    "category": "TV Series",
    "rating": "18+",
    "isBookmarked": false,
    "isTrending": false
  },
  {
    "title": "Van Life",
    "thumbnail": "./assets/thumbnails/van-life/regular/large.jpg",
    "year": 2015,
    "category": "Movie",
    "rating": "PG",
    "isBookmarked": false,
    "isTrending": false
  },
  {
    "title": "The Heiress",
    "thumbnail": "./assets/thumbnails/the-heiress/regular/large.jpg",
    "year": 2021,
    "category": "Movie",
    "rating": "PG",
    "isBookmarked": true,
    "isTrending": false
  },
  {
    "title": "Off the Track",
    "thumbnail": "./assets/thumbnails/off-the-track/regular/large.jpg",
    "year": 2017,
    "category": "Movie",
    "rating": "18+",
    "isBookmarked": true,
    "isTrending": false
  },
  {
    "title": "Whispering Hill",
    "thumbnail": "./assets/thumbnails/whispering-hill/regular/large.jpg",
    "year": 2017,
    "category": "Movie",
    "rating": "E",
    "isBookmarked": false,
    "isTrending": false
  },
  {
    "title": "112",
    "thumbnail": "./assets/thumbnails/112/regular/large.jpg",
    "year": 2013,
    "category": "TV Series",
    "rating": "PG",
    "isBookmarked": false,
    "isTrending": false
  },
  {
    "title": "Lone Heart",
    "thumbnail": "./assets/thumbnails/lone-heart/regular/large.jpg",
    "year": 2017,
    "category": "Movie",
    "rating": "E",
    "isBookmarked": true,
    "isTrending": false
  },
  {
    "title": "Production Line",
    "thumbnail": "./assets/thumbnails/production-line/regular/large.jpg",
    "year": 2018,
    "category": "TV Series",
    "rating": "PG",
    "isBookmarked": false,
    "isTrending": false
  },
  {
    "title": "Dogs",
    "thumbnail": "./assets/thumbnails/dogs/regular/large.jpg",
    "year": 2016,
    "category": "TV Series",
    "rating": "E",
    "isBookmarked": true,
    "isTrending": false
  },
  {
    "title": "Asia in 24 Days",
    "thumbnail": "./assets/thumbnails/asia-in-24-days/regular/large.jpg",
    "year": 2020,
    "category": "TV Series",
    "rating": "PG",
    "isBookmarked": false,
    "isTrending": false
  },
  {
    "title": "The Tasty Tour",
    "thumbnail": "./assets/thumbnails/the-tasty-tour/regular/large.jpg",
    "year": 2016,
    "category": "TV Series",
    "rating": "PG",
    "isBookmarked": false,
    "isTrending": false
  },
  {
    "title": "Darker",
    "thumbnail": "./assets/thumbnails/darker/regular/large.jpg",
    "year": 2017,
    "category": "Movie",
    "rating": "18+",
    "isBookmarked": true,
    "isTrending": false
  },
  {
    "title": "Unresolved Cases",
    "thumbnail": "./assets/thumbnails/unresolved-cases/regular/large.jpg",
    "year": 2018,
    "category": "TV Series",
    "rating": "18+",
    "isBookmarked": false,
    "isTrending": false
  },
  {
    "title": "Mission: Saturn",
    "thumbnail": "./assets/thumbnails/mission-saturn/regular/large.jpg",
    "year": 2017,
    "category": "Movie",
    "rating": "PG",
    "isBookmarked": true,
    "isTrending": false
  }
]'::json)
)
INSERT INTO movies (title, thumbnail, year, category, rating, isBookmarked, isTrending) 
SELECT p.* FROM data_json l CROSS JOIN LATERAL json_populate_recordset(null::movies, doc) as p 
on conflict (id) do update set title = excluded.title, thumbnail = excluded.thumbnail,
year = excluded.year, category = excluded.category, rating = excluded.rating,
isBookmarked = excluded.isBookmarked, isTrending = excluded.isTrending;